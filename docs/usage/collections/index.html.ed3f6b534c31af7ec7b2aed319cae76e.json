{"head":{"title":"How to use Collections in Phenomic","incomplete":true,"description":"By default, Phenomic provides two things to help you work with collections: it creates a file that contains all page metadata in a uniqueâ€¦"},"body":"<p>By default, Phenomic provides two things to help you work with collections:</p>\n<ul>\n<li>it creates a file that contains all page metadata in a unique collection,</li>\n<li>it provides a helper that helps you filter/sort/limit the collection.</li>\n</ul>\n<h2 id=\"collection-file\"><a href=\"#collection-file\" class=\"phenomic-HeadingAnchor\">#</a>Collection file</h2>\n<p>Here is a simple collection example; note that the metadata defines the\nadditional fields <code>__filename</code> &#x26; <code>__url</code>.</p>\n<pre><code class=\"hljs language-json\">[\n  {\n    <span class=\"hljs-attr\">\"__filename\"</span>: <span class=\"hljs-string\">\"index.md\"</span>,\n    <span class=\"hljs-attr\">\"__url\"</span>: <span class=\"hljs-string\">\"/\"</span>,\n    <span class=\"hljs-attr\">\"title\"</span>: <span class=\"hljs-string\">\"Awesome Website\"</span>\n  },\n  {\n    <span class=\"hljs-attr\">\"__filename\"</span>: <span class=\"hljs-string\">\"blog/index.md\"</span>,\n    <span class=\"hljs-attr\">\"__url\"</span>: <span class=\"hljs-string\">\"/blog/\"</span>,\n    <span class=\"hljs-attr\">\"title\"</span>: <span class=\"hljs-string\">\"Awesome blog\"</span>\n  },\n  {\n    <span class=\"hljs-attr\">\"__filename\"</span>: <span class=\"hljs-string\">\"blog/halloween.md\"</span>,\n    <span class=\"hljs-attr\">\"__url\"</span>: <span class=\"hljs-string\">\"/blog/halloween/\"</span>,\n    <span class=\"hljs-attr\">\"title\"</span>: <span class=\"hljs-string\">\"Awesome Halloween blog post\"</span>,\n    <span class=\"hljs-attr\">\"layout\"</span>: <span class=\"hljs-string\">\"Post\"</span>,\n    <span class=\"hljs-attr\">\"date\"</span>: <span class=\"hljs-string\">\"2015-10-31\"</span>\n  },\n  {\n    <span class=\"hljs-attr\">\"__filename\"</span>: <span class=\"hljs-string\">\"blog/xmas.md\"</span>,\n    <span class=\"hljs-attr\">\"__url\"</span>: <span class=\"hljs-string\">\"/blog/xmas/\"</span>,\n    <span class=\"hljs-attr\">\"title\"</span>: <span class=\"hljs-string\">\"Awesome Christmas blog post\"</span>,\n    <span class=\"hljs-attr\">\"layout\"</span>: <span class=\"hljs-string\">\"Post\"</span>,\n    <span class=\"hljs-attr\">\"date\"</span>: <span class=\"hljs-string\">\"2015-12-25\"</span>\n  },\n]</code></pre>\n<p>As you can see, this file contains all pages, indexes and posts.</p>\n<p>The easiest way to get some data is to use the Phenomic helper:</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// es6</span>\n<span class=\"hljs-keyword\">import</span> enhanceCollection <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"phenomic/lib/enhance-collection\"</span>\n\n<span class=\"hljs-comment\">// es5</span>\n<span class=\"hljs-keyword\">var</span> enhanceCollection = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">\"phenomic/lib/enhance-collection\"</span>).default</code></pre>\n<p>With it, you can easily filter some pages anywhere in your components:</p>\n<pre><code class=\"hljs language-js\">enhanceCollection(collection, {\n  <span class=\"hljs-attr\">filter</span>: { <span class=\"hljs-attr\">layout</span>: <span class=\"hljs-string\">\"Post\"</span> },\n  <span class=\"hljs-attr\">sort</span>: <span class=\"hljs-string\">\"date\"</span>,\n  <span class=\"hljs-attr\">reverse</span>: <span class=\"hljs-literal\">true</span>,\n  <span class=\"hljs-comment\">// limit: 1,</span>\n})</code></pre>\n<p>So, where does this collection come from? Here is an example of a component\nthat will display posts, sorted by date, and other pages (that are not a post)\nin a second list. You will see that the collection is retrieved from\n<a href=\"https://facebook.github.io/react/docs/context.html\">the context</a>.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">import</span> React, { Component, PropTypes } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"react\"</span>\n\n<span class=\"hljs-keyword\">import</span> Page <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"Page\"</span>\n\n<span class=\"hljs-keyword\">import</span> enhanceCollection <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"phenomic/lib/enhance-collection\"</span>\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Collection</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Component</span> </span>{\n\n  <span class=\"hljs-keyword\">static</span> propTypes = {\n    <span class=\"hljs-attr\">head</span>: PropTypes.object.isRequired,\n    <span class=\"hljs-attr\">body</span>: PropTypes.string,\n  };\n\n  <span class=\"hljs-keyword\">static</span> contextTypes = {\n    <span class=\"hljs-attr\">collection</span>: PropTypes.array,\n  };\n\n  render() {\n    <span class=\"hljs-keyword\">const</span> {\n      collection,\n    } = <span class=\"hljs-keyword\">this</span>.context\n    <span class=\"hljs-keyword\">return</span> (\n      <span class=\"xml\"><span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">div</span>></span>\n        </span>&#x3C;Page { ...this.props } />\n        {\n          Boolean(!collection || !collection.length) &#x26;&#x26;\n          &#x3C;div>\n            { \"No entry\" }\n          &#x3C;/div>\n        }\n        {\n          Boolean(collection &#x26;&#x26; collection.length) &#x26;&#x26;\n          &#x3C;div>\n            { \"Posts (by date)\" }\n            &#x3C;ul>\n            {\n              enhanceCollection(collection, {\n                filter: { layout: \"Post\" },\n                sort: \"date\",\n                reverse: true,\n                // limit: 1,\n              })\n              .map((item) => {\n                return (\n                  &#x3C;li key={ item.__url }>\n                    &#x3C;a href={ item.__url }>\n                      { item.title }\n                    &#x3C;/a>\n                  &#x3C;/li>\n                )\n              })\n            }\n            &#x3C;/ul>\n\n            { \"Other pages\" }\n            &#x3C;ul>\n            {\n              enhanceCollection(collection, {\n                filter: ({ layout }) => layout !== \"Post\",\n                sort: \"title\",\n              })\n              .map((item) => {\n                return (\n                  &#x3C;li key={ item.__url }>\n                    &#x3C;a href={ item.__url }>\n                      { item.title }\n                    &#x3C;/a>\n                  &#x3C;/li>\n                )\n              })\n            }\n            &#x3C;/ul>\n          &#x3C;/div>\n        }\n      &#x3C;/div><span class=\"xml\">\n    )\n  }\n}</span></code></pre>\n","__filename":"docs/usage/collections.md","__url":"/docs/usage/collections/","__resourceUrl":"/docs/usage/collections/index.html","__dataUrl":"/docs/usage/collections/index.html.ed3f6b534c31af7ec7b2aed319cae76e.json"}